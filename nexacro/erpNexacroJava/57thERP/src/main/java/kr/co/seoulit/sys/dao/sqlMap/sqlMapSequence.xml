<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.seoulit.sys.dao.SequenceDAO">

 	<select id="selectSequenceNo"  parameterType="map" resultType="string" >

		 SELECT CASE WHEN
		<if test="findSeq.equals('WIT_SEQ') ">
		3>LENGTH(WIT_SEQ.NEXTVAL) THEN TO_CHAR(SYSDATE,'YYMMDD')||'-'||LPAD(WIT_SEQ.CURRVAL,2,0) ELSE TO_CHAR(SYSDATE,'YYMMDD')||'-'||WIT_SEQ.CURRVAL END FROM DUAL
		</if>
		<if test="findSeq.equals('SERIAL_SEQ') ">
		3>LENGTH(SERIAL_SEQ.NEXTVAL) THEN TO_CHAR(SYSDATE,'YYMMDD')||'-'||LPAD(SERIAL_SEQ.CURRVAL,2,0) ELSE TO_CHAR(SYSDATE,'YYMMDD')||'-'||SERIAL_SEQ.CURRVAL END FROM DUAL
		</if>
		<if test="findSeq.equals('PRM_SEQ') ">
		3>LENGTH(PRM_SEQ.NEXTVAL) THEN TO_CHAR(SYSDATE,'YYMMDD')||'-'||LPAD(PRM_SEQ.CURRVAL,2,0) ELSE TO_CHAR(SYSDATE,'YYMMDD')||'-'||PRM_SEQ.CURRVAL END FROM DUAL
		</if>
		<if test="findSeq.equals('WH_SEQ') ">
	 	3>LENGTH(WH_SEQ.NEXTVAL) THEN TO_CHAR(SYSDATE,'YYMMDD')||'-'||LPAD(WH_SEQ.CURRVAL,2,0) ELSE TO_CHAR(SYSDATE,'YYMMDD')||'-'||WH_SEQ.CURRVAL END FROM DUAL
		</if>
		<if test="findSeq.equals('RWH_SEQ') ">
	 	3>LENGTH(RWH_SEQ.NEXTVAL) THEN TO_CHAR(SYSDATE,'YYMMDD')||'-'||LPAD(RWH_SEQ.CURRVAL,2,0) ELSE TO_CHAR(SYSDATE,'YYMMDD')||'-'||RWH_SEQ.CURRVAL END FROM DUAL
		</if>
		<if test="findSeq.equals('ESTI_SEQ') ">
	 	3>LENGTH(ESTI_SEQ.NEXTVAL) THEN TO_CHAR(SYSDATE,'YYMMDD')||'-'||LPAD(ESTI_SEQ.CURRVAL,2,0) ELSE TO_CHAR(SYSDATE,'YYMMDD')||'-'||ESTI_SEQ.CURRVAL END FROM DUAL
		</if>
		<if test="findSeq.equals('MPS_SEQ') ">
		<![CDATA[
	 	LENGTH(MPS_SEQ.NEXTVAL)<3 THEN TO_CHAR(SYSDATE,'YYMMDD')||'-'||LPAD(MPS_SEQ.CURRVAL,2,0) ELSE TO_CHAR(SYSDATE,'YYMMDD')||'-'||MPS_SEQ.CURRVAL END FROM DUAL
		 ]]>
		</if>
		<if test="findSeq.equals('SLIP_SEQ') ">
	 	4>LENGTH(SLIP_SEQ.NEXTVAL) THEN 'SLIP'||TO_CHAR(SYSDATE,'YYMMDD')||'-'||LPAD(SLIP_SEQ.NEXTVAL,3,0) ELSE 'SLIP'||TO_CHAR(SYSDATE,'YYMMDD')||'-'||SLIP_SEQ.CURRVAL END FROM DUAL
		</if>
       <if test="findSeq.equals('JOURNAL_SEQ') ">
	 	4>LENGTH(JOURNAL_SEQ.NEXTVAL) THEN 'SLIP'||TO_CHAR(SYSDATE,'YYMMDD')||'-'||LPAD((SELECT LAST_NUMBER-1 FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'SLIP_SEQ'),3,0)||'-'||LPAD(JOURNAL_SEQ.NEXTVAL,3,0)
	 	ELSE 'SLIP'||TO_CHAR(SYSDATE,'YYMMDD')||'-'||LPAD((SELECT LAST_NUMBER-1 FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'SLIP_SEQ'),3,0)||'-'||JOURNAL_SEQ.CURRVAL END FROM DUAL
		</if>
       <if test="findSeq.equals('JOURNAL_DETAIL_SEQ') ">
	 	4>LENGTH(JOURNAL_DETAIL_SEQ.NEXTVAL) THEN 'SLIP'||TO_CHAR(SYSDATE,'YYMMDD')||'-'||LPAD((SELECT LAST_NUMBER-1 FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'SLIP_SEQ'),3,0)||'-'||LPAD((SELECT LAST_NUMBER-1 FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'JOURNAL_SEQ'),3,0)||'-'||LPAD(JOURNAL_DETAIL_SEQ.NEXTVAL,3,0)
	 	ELSE 'SLIP'||TO_CHAR(SYSDATE,'YYMMDD')||'-'||LPAD((SELECT LAST_NUMBER-1 FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'SLIP_SEQ'),3,0)||'-'||LPAD((SELECT LAST_NUMBER-1 FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'JOURNAL_SEQ'),3,0)||'-'||JOURNAL_DETAIL_SEQ.CURRVAL END FROM DUAL
		</if>
	</select>
	

</mapper>